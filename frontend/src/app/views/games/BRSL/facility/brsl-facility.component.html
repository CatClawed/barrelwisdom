<Error *ngIf="error" [errorCode]="error"></Error>

<ng-container *ngIf="data as facility">
  <Breadcrumb *ngIf="showNav" [breadcrumbs]="[[gameTitle, '/'+gameURL], ['Facilities', '/'+gameURL+'/facilities/'+language]]" [current]="facility.name"></Breadcrumb>
<div class="mx-auto row">
 <div class="{{colset}} card card-body">
    <h4 class="card-title card-icon-space">{{facility.name}}</h4>
    <span *ngIf="facility.isDLC" class="card-icon-position badge bg-secondary">DLC</span>
    <img class="image-display" loading="lazy" src="{{imgURL}}facilities/{{facility.slug}}.webp" alt="{{facility.name">
    <table class="tbl" style="margin-top:1rem;">
      <tr>
        <td style="vertical-align:middle; border-bottom:1px solid #c8c3d3;">{{facility.desc}}</td>
        <td style="vertical-align:middle; padding:0;border-bottom:1px solid #c8c3d3;"><img src="/media/games/second-light/characters/{{facility.char}}.webp" alt=""></td>
      </tr>
    </table>
    <ng-container *ngIf="facility.facilityeffline_set">
      <table class="tbl table-shrink">
        <tr class="table-dark-center"><th colspan=2>Effects</th></tr>
        <tr *ngFor="let eline of facility.facilityeffline_set">
          <td>{{eline.line}}</td>
          <td>
            <ul>
              <li *ngFor="let data of eline.effectdata">
                <ng-template #effPopover>
                  {{data.effect.desc}}
                </ng-template>
                <a href="javascript:void(0)" (click)="$event.preventDefault();" [popover]="effPopover" popoverTitle="{{data.effect.name}}">{{data.effect.name}}</a>
              </li>
            </ul>
          </td>
        </tr>
      </table>
    </ng-container>
    <ng-container *ngIf="facility.facilitying_set">
      <table class="tbl table-shrink">
        <tr class="table-dark-center"><th colspan=2>Ingredients</th></tr>
        <tr *ngFor="let line of facility.facilitying_set">
          <td>{{line.level}}</td>
          <td>
            <ul>
              <li *ngFor="let data of line.data">
                <a *ngIf="data.item"  routerLink="/{{gameURL}}/items/{{data.item.slug}}/{{language}}">{{data.item.name}}</a>
                <span *ngIf="data.category">{{data.category.name}}</span>
                x{{data.num}}
                <span *ngIf="data.effect"> ({{data.effect.name}})</span>
              </li>
            </ul>
          </td>
        </tr>
      </table>
    </ng-container>
  </div>
  <div *ngIf="showNav" class="col-md-3" ></div>
</div>
</ng-container>
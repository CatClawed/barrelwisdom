{"version":3,"sources":["../src/ajax-load.js"],"names":["AjaxLoad","$","NAME","VERSION","DATA_KEY","JQUERY_NO_CONFLICT","fn","ClassName","ACTIVE","NAV_PILLS","NAV_TABS","OPEN","VIEW_SCRIPT","Event","CLICK","Selector","HEAD","NAV_DROPDOWN","NAV_LINK","NAV_ITEM","Default","defaultPage","errorPage","subpagesDirectory","element","config","_config","_getConfig","_element","url","location","hash","replace","setUpUrl","_removeEventListeners","_addEventListeners","loadPage","loadScripts","src","script","document","createElement","type","className","onload","onreadystatechange","readyState","length","body","getElementsByTagName","appendChild","ajax","dataType","beforeSend","remove","success","result","wrapper","innerHTML","scripts","Array","from","querySelectorAll","map","attributes","getNamedItem","nodeValue","forEach","parentNode","removeChild","animate","scrollTop","html","window","error","href","removeClass","split","addClass","loadBlank","open","loadTop","on","event","preventDefault","stopPropagation","currentTarget","target","getAttribute","off","_jQueryInterface","each","data","Constructor","noConflict"],"mappings":"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","sourcesContent":["import $ from 'jquery'\r\n\r\n/**\r\n * --------------------------------------------------------------------------\r\n * CoreUI (v2.1.16): ajax-load.js\r\n * Licensed under MIT (https://coreui.io/license)\r\n * --------------------------------------------------------------------------\r\n */\r\n\r\n\r\nconst AjaxLoad = (($) => {\r\n  /**\r\n   * ------------------------------------------------------------------------\r\n   * Constants\r\n   * ------------------------------------------------------------------------\r\n   */\r\n\r\n  const NAME                       = 'ajaxLoad'\r\n  const VERSION                    = '2.1.16'\r\n  const DATA_KEY                   = 'coreui.ajaxLoad'\r\n  const JQUERY_NO_CONFLICT         = $.fn[NAME]\r\n\r\n  const ClassName = {\r\n    ACTIVE      : 'active',\r\n    NAV_PILLS   : 'nav-pills',\r\n    NAV_TABS    : 'nav-tabs',\r\n    OPEN        : 'open',\r\n    VIEW_SCRIPT : 'view-script'\r\n  }\r\n\r\n  const Event = {\r\n    CLICK : 'click'\r\n  }\r\n\r\n  const Selector = {\r\n    HEAD         : 'head',\r\n    NAV_DROPDOWN : '.sidebar-nav .nav-dropdown',\r\n    NAV_LINK     : '.sidebar-nav .nav-link',\r\n    NAV_ITEM     : '.sidebar-nav .nav-item',\r\n    VIEW_SCRIPT  : '.view-script'\r\n  }\r\n\r\n  const Default = {\r\n    defaultPage       : 'main.html',\r\n    errorPage         : '404.html',\r\n    subpagesDirectory : 'views/'\r\n  }\r\n\r\n  class AjaxLoad {\r\n    constructor(element, config) {\r\n      this._config = this._getConfig(config)\r\n      this._element = element\r\n\r\n      const url = location.hash.replace(/^#/, '')\r\n\r\n      if (url !== '') {\r\n        this.setUpUrl(url)\r\n      } else {\r\n        this.setUpUrl(this._config.defaultPage)\r\n      }\r\n      this._removeEventListeners()\r\n      this._addEventListeners()\r\n    }\r\n\r\n    // Getters\r\n\r\n    static get VERSION() {\r\n      return VERSION\r\n    }\r\n\r\n    static get Default() {\r\n      return Default\r\n    }\r\n\r\n    // Public\r\n\r\n    loadPage(url) {\r\n      const element = this._element\r\n      const config = this._config\r\n\r\n      const loadScripts = (src, element = 0) => {\r\n        const script = document.createElement('script')\r\n        script.type = 'text/javascript'\r\n        script.src = src[element]\r\n        script.className = ClassName.VIEW_SCRIPT\r\n        // eslint-disable-next-line no-multi-assign\r\n        script.onload = script.onreadystatechange = function () {\r\n          if (!this.readyState || this.readyState === 'complete') {\r\n            if (src.length > element + 1) {\r\n              loadScripts(src, element + 1)\r\n            }\r\n          }\r\n        }\r\n        const body = document.getElementsByTagName('body')[0]\r\n        body.appendChild(script)\r\n      }\r\n\r\n      $.ajax({\r\n        type : 'GET',\r\n        url : config.subpagesDirectory + url,\r\n        dataType : 'html',\r\n        beforeSend() {\r\n          $(Selector.VIEW_SCRIPT).remove()\r\n        },\r\n        success(result) {\r\n          const wrapper = document.createElement('div')\r\n          wrapper.innerHTML = result\r\n\r\n          const scripts = Array.from(wrapper.querySelectorAll('script')).map((script) => script.attributes.getNamedItem('src').nodeValue)\r\n\r\n          wrapper.querySelectorAll('script').forEach((script) => script.parentNode.removeChild(script))\r\n\r\n          $('body').animate({\r\n            scrollTop: 0\r\n          }, 0)\r\n          $(element).html(wrapper)\r\n          if (scripts.length) {\r\n            loadScripts(scripts)\r\n          }\r\n          window.location.hash = url\r\n        },\r\n        error() {\r\n          window.location.href = config.errorPage\r\n        }\r\n      })\r\n    }\r\n\r\n    setUpUrl(url) {\r\n      $(Selector.NAV_LINK).removeClass(ClassName.ACTIVE)\r\n      $(Selector.NAV_DROPDOWN).removeClass(ClassName.OPEN)\r\n\r\n      $(`${Selector.NAV_DROPDOWN}:has(a[href=\"${url.replace(/^\\//, '').split('?')[0]}\"])`).addClass(ClassName.OPEN)\r\n      $(`${Selector.NAV_ITEM} a[href=\"${url.replace(/^\\//, '').split('?')[0]}\"]`).addClass(ClassName.ACTIVE)\r\n\r\n      this.loadPage(url)\r\n    }\r\n\r\n    loadBlank(url) {\r\n      window.open(url)\r\n    }\r\n\r\n    loadTop(url) {\r\n      window.location = url\r\n    }\r\n\r\n    // Private\r\n\r\n    _getConfig(config) {\r\n      config = {\r\n        ...Default,\r\n        ...config\r\n      }\r\n      return config\r\n    }\r\n\r\n    _addEventListeners() {\r\n      $(document).on(Event.CLICK, `${Selector.NAV_LINK}[href!=\"#\"]`, (event) => {\r\n        event.preventDefault()\r\n        event.stopPropagation()\r\n\r\n        if (event.currentTarget.target === '_top') {\r\n          this.loadTop(event.currentTarget.href)\r\n        } else if (event.currentTarget.target === '_blank') {\r\n          this.loadBlank(event.currentTarget.href)\r\n        } else {\r\n          this.setUpUrl(event.currentTarget.getAttribute('href'))\r\n        }\r\n      })\r\n    }\r\n\r\n    _removeEventListeners() {\r\n      $(document).off(Event.CLICK, `${Selector.NAV_LINK}[href!=\"#\"]`)\r\n    }\r\n\r\n    // Static\r\n\r\n    static _jQueryInterface(config) {\r\n      return this.each(function () {\r\n        let data = $(this).data(DATA_KEY)\r\n        const _config = typeof config === 'object' && config\r\n\r\n        if (!data) {\r\n          data = new AjaxLoad(this, _config)\r\n          $(this).data(DATA_KEY, data)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ------------------------------------------------------------------------\r\n   * jQuery\r\n   * ------------------------------------------------------------------------\r\n   */\r\n\r\n  $.fn[NAME] = AjaxLoad._jQueryInterface\r\n  $.fn[NAME].Constructor = AjaxLoad\r\n  $.fn[NAME].noConflict = () => {\r\n    $.fn[NAME] = JQUERY_NO_CONFLICT\r\n    return AjaxLoad._jQueryInterface\r\n  }\r\n\r\n  return AjaxLoad\r\n})($)\r\n\r\nexport default AjaxLoad\r\n"],"file":"ajax-load.js"}